# AI-BOS Token Constitution
# Version: 2.1.0
# Purpose: Token governance, immutability, RSC rules, and AI generation guardrails
# Source of Truth: packages/ui/src/design/tokens/globals.css (CSS variables)
# Aligned with: docs/01-foundation/ui-system/tokens.md
# Machine-Enforceable: All rules have IDs for MCP validation

$schema: "http://json-schema.org/draft-07/schema#"
title: "AI-BOS Token Constitution"
version: "2.1.0"
description: "Token governance, immutability, RSC rules, and AI generation guardrails for AI-BOS design system. Machine-enforceable with rule IDs."

# Source of Truth Reference
sourceOfTruth:
  file: "packages/ui/src/design/tokens/globals.css"
  description: "All base token values are defined in globals.css as CSS variables"
  validation: "Tokens in this constitution must match tokens defined in globals.css"
  sync: "When globals.css tokens change, update this constitution accordingly"
  documentation: "docs/01-foundation/ui-system/tokens.md"
  syncRequired: true

# ---------------------------------------------------------------------
# 1. Canonical Token Prefix Registry
# ---------------------------------------------------------------------
naming:
  allowedPrefixes:
    - color
    - space
    - text
    - radius
    - shadow
    - motion
    - opacity
    - density
    - layer
    - focus
    - state
    - grid
    - layout
  rules:
    - id: TOK-NAME-001
      rule: "CSS variables must match pattern /^--[a-z0-9-]+$/"
      description: "Token names must start with -- and contain only lowercase letters, numbers, and hyphens"
    - id: TOK-NAME-002
      rule: "Only approved prefixes may be used"
      description: "Token names must start with one of the allowed prefixes"
    - id: TOK-NAME-003
      rule: "No uppercase letters in token names"
      description: "All token names must be lowercase"
    - id: TOK-NAME-004
      rule: "Semantic names must not contain raw values"
      description: "Avoid names like 'red', 'small', 'bold' - use semantic names like 'primary', 'body', 'semibold'"

# ---------------------------------------------------------------------
# 2. Token Hierarchy (Four-Layer System)
# ---------------------------------------------------------------------
hierarchy:
  - level: global
    name: "Global Tokens (Base Values)"
    immutable: true
    source: "globals.css"
    description: "Raw design values (colors, spacing, typography, etc.) - No semantic meaning"
    validation:
      - id: TOK-HIER-001
        rule: "Global tokens must not reference semantic tokens"
        description: "Global tokens are the base layer and cannot depend on other tokens"
      - id: TOK-HIER-002
        rule: "Global tokens must not be tenant-overridden"
        description: "Base tokens are immutable and cannot be customized"
      - id: TOK-HIER-003
        rule: "Global tokens must exist in globals.css"
        description: "All global tokens must be defined in the source of truth"
    examples:
      - "--color-gray-50"
      - "--color-blue-600"
      - "--space-4"
      - "--text-base"
      - "--radius-md"

  - level: semantic
    name: "Semantic Tokens (Meaning-Based)"
    immutable: false
    source: "globals.css"
    description: "Tokens with semantic meaning (surface, text, accent, status, etc.) - Theme-aware, tenant-customizable (aesthetic only)"
    validation:
      - id: TOK-HIER-010
        rule: "Semantic tokens must reference global tokens"
        description: "Semantic tokens must use var() to reference global tokens"
      - id: TOK-HIER-011
        rule: "Semantic tokens cannot use raw values"
        description: "Semantic tokens must reference global tokens, not define new values"
      - id: TOK-HIER-012
        rule: "Semantic tokens must adapt to WCAG themes"
        description: "Semantic tokens must have WCAG AA/AAA variants"
    examples:
      - "--color-surface"
      - "--color-text"
      - "--color-accent"
      - "--color-accent-hover"
      - "--space-button-y"
      - "--text-body"
      - "--radius-button"

  - level: component
    name: "Component Tokens (Pre-Composed)"
    immutable: false
    source: "tokens.ts"
    description: "Pre-composed token combinations for common component patterns"
    validation:
      - id: TOK-HIER-020
        rule: "Component tokens must reference semantic tokens only"
        description: "Component tokens must use semantic tokens, not global tokens"
      - id: TOK-HIER-021
        rule: "Component tokens must support density modes"
        description: "All component tokens must work with compact, default, and comfortable density"
      - id: TOK-HIER-022
        rule: "Component tokens must not contain layout spacing"
        description: "Use flex/grid for layout, not component tokens"
    examples:
      - "componentTokens.buttonPrimary"
      - "componentTokens.card"
      - "componentTokens.input"

  - level: utility
    name: "Utility Tokens (Tailwind Classes)"
    immutable: false
    source: "tokens.ts"
    description: "TypeScript mappings to Tailwind utility classes"
    validation:
      - id: TOK-HIER-030
        rule: "Utility tokens must map directly to CSS variables"
        description: "Utility tokens must reference CSS variables, not define new values"
      - id: TOK-HIER-031
        rule: "Utility tokens must be type-safe"
        description: "All utility tokens must have TypeScript types"
    examples:
      - "colorTokens.surface.default"
      - "spacingTokens.md"
      - "typographyTokens.body"

# ---------------------------------------------------------------------
# 3. Precedence Order (Machine-Readable)
# ---------------------------------------------------------------------
precedenceOrder:
  - default
  - tenant
  - wcagAA
  - wcagAAA
  - highContrast
  - safeMode

# ---------------------------------------------------------------------
# 4. Cross-Category Conflict Rules
# ---------------------------------------------------------------------
conflictRules:
  - id: CONFLICT-001
    rule: "Color tokens cannot define spacing values"
    description: "Color tokens must only contain color values, not spacing"
  - id: CONFLICT-002
    rule: "Spacing tokens cannot define text values"
    description: "Spacing tokens must only contain spacing values, not typography"
  - id: CONFLICT-003
    rule: "Typography tokens cannot define colors"
    description: "Typography tokens must only contain typography values, not colors"
  - id: CONFLICT-004
    rule: "Focus ring tokens cannot modify spacing"
    description: "Focus ring tokens must only contain focus-related values"
  - id: CONFLICT-005
    rule: "Status tokens cannot be overridden by tenants"
    description: "Status tokens (success, warning, danger, info) are immutable"

# ---------------------------------------------------------------------
# 5. Token Immutability Matrix
# ---------------------------------------------------------------------
immutability:
  immutable:
    - "Global tokens (level 1)"
    - "Base color tokens (--color-gray-*)"
    - "Base spacing tokens (--space-*)"
    - "Base typography tokens (--text-*)"
    - "Status tokens (--color-success, --color-warning, --color-danger, --color-info)"
    - "Border tokens (--color-border-*)"
    - "Focus ring tokens (--focus-ring-*)"
    - "WCAG theme tokens"
    - "Safe Mode tokens"
  mutable:
    - "Semantic tokens (level 2) - tenant customizable in aesthetic theme only"
    - "Component tokens (level 3)"
    - "Utility tokens (level 4)"
  tenantMutable:
    - "--color-accent (aesthetic theme only)"
    - "--color-accent-soft (aesthetic theme only)"
    - "--color-accent-foreground (aesthetic theme only)"
    - "--color-accent-hover (aesthetic theme only)"
    - "--color-accent-active (aesthetic theme only)"
  rules:
    - id: IMMUT-001
      rule: "Immutable tokens cannot be overridden by tenants"
    - id: IMMUT-002
      rule: "Immutable tokens cannot be overridden in WCAG themes"
    - id: IMMUT-003
      rule: "Tenant mutable tokens can only be overridden in aesthetic theme"

# ---------------------------------------------------------------------
# 6. Scoping Rules
# ---------------------------------------------------------------------
scoping:
  rootSelector: ":root, html, [data-app-root]"
  inheritanceRules:
    - id: SCOPE-001
      rule: "All tokens must cascade from root"
    - id: SCOPE-002
      rule: "Shadow DOM must explicitly receive token sheet"
    - id: SCOPE-003
      rule: "Microfrontends must mount token sheet on load"
  isolationLayers:
    - shadow-root
    - iframe

# ---------------------------------------------------------------------
# 7. Atomic Updates
# ---------------------------------------------------------------------
atomicUpdates:
  batching: true
  applyStrategy: "style-tag-swap"
  rules:
    - id: ATOMIC-001
      rule: "Never update CSS variables individually"
    - id: ATOMIC-002
      rule: "Always batch overrides and apply atomically"
    - id: ATOMIC-003
      rule: "Rollback available on failure"
    - id: ATOMIC-004
      rule: "No flash of unstyled content (FOUC) during theme switching"

# ---------------------------------------------------------------------
# 8. Token Categories (12 Categories)
# ---------------------------------------------------------------------
categories:
  # -------------------------------------------------
  # 8.1 COLOR TOKENS
  # -------------------------------------------------
  color:
    required: true
    semantic: true
    description: "All color usage must go through semantic tokens"
    rules:
      - id: COL-001
        rule: "No hex values allowed in components"
      - id: COL-002
        rule: "No palette classes (e.g., bg-blue-600)"
      - id: COL-003
        rule: "All colors must pass WCAG AA or AAA depending on theme"
      - id: COL-004
        rule: "Colors MUST use semantic tokens"
      - id: COL-005
        rule: "Contrast validation required"
      - id: COL-006
        rule: "Safe mode must preserve contrast"
      - id: COL-007
        rule: "WCAG themes enforce fixed color pairs"
    contrast:
      aa: ">= 4.5:1"
      aaa: ">= 7:1"
      interactive: ">= 3:1"
      largeText: ">= 3:1 (AA) or >= 4.5:1 (AAA)"
    layers:
      global:
        - "--color-gray-50 through --color-gray-950"
        - "--color-blue-600, --color-green-600, --color-red-600"
      semantic:
        - "--color-surface, --color-surface-muted, --color-surface-elevated"
        - "--color-text, --color-text-muted, --color-text-subtle"
        - "--color-accent, --color-accent-hover, --color-accent-active"
      status:
        - "--color-success, --color-warning, --color-danger, --color-info"
      border:
        - "--color-border, --color-border-subtle, --color-border-strong"
    tenantOverride:
      allowed:
        - "--color-accent"
        - "--color-accent-soft"
        - "--color-accent-foreground"
        - "--color-accent-hover"
        - "--color-accent-active"
      forbidden:
        - "WCAG themes (AA, AAA, high-contrast)"
        - "Safe Mode"
        - "Base tokens (--color-gray-*)"
        - "Status tokens (--color-success, --color-warning, --color-danger, --color-info)"
        - "Border tokens (--color-border-*)"
        - "Focus ring tokens (--focus-ring-*)"
        - "Content text tokens (--color-text-*)"
      rules:
        - id: TENANT-001
          rule: "Tenants can only override accent tokens in aesthetic theme"
        - id: TENANT-002
          rule: "System validates tenant colors - if fails WCAG AA, forces WCAG AA override"
        - id: TENANT-003
          rule: "WCAG themes are fixed and cannot be customized"

  # -------------------------------------------------
  # 8.2 SPACING TOKENS
  # -------------------------------------------------
  spacing:
    required: true
    semantic: true
    scale: "4px grid (all spacing must be multiple of 4px)"
    rules:
      - id: SPACE-001
        rule: "All spacing must be multiples of 4px"
      - id: SPACE-002
        rule: "No arbitrary pixels allowed"
      - id: SPACE-003
        rule: "WCAG minimum input padding: 12px"
      - id: SPACE-004
        rule: "WCAG minimum touch target: 44px"
      - id: SPACE-005
        rule: "Must use semantic spacing tokens when available"
    layers:
      global:
        - "--space-1: 0.25rem (4px)"
        - "--space-2: 0.5rem (8px)"
        - "--space-4: 1rem (16px)"
        - "--space-6: 1.5rem (24px)"
        - "--space-8: 2rem (32px)"
      semantic:
        - "--space-button-y, --space-button-x"
        - "--space-input-y, --space-input-x"
        - "--space-card-padding, --space-card-gap"
        - "--space-section-gap, --space-grid-gap"
    density:
      compact: "-2px from base spacing, 0.75× multiplier"
      default: "0px offset, 1× multiplier"
      comfortable: "+2px from base spacing, 1.25× multiplier"
      rules:
        - id: DENSITY-001
          rule: "All components must support density modes"
        - id: DENSITY-002
          rule: "Density applies to spacing tokens"
        - id: DENSITY-003
          rule: "WCAG minimums must be maintained in all density modes"

  # -------------------------------------------------
  # 8.3 TYPOGRAPHY TOKENS
  # -------------------------------------------------
  typography:
    required: true
    semantic: true
    scale: "Major Third (1.250 ratio)"
    rules:
      - id: TYPE-001
        rule: "Typography must use semantic tokens"
      - id: TYPE-002
        rule: "No raw font sizes allowed"
      - id: TYPE-003
        rule: "Line height must use tokens"
      - id: TYPE-004
        rule: "Font weight must use tokens"
    wcag:
      aa:
        minBody: "14px"
        minCaption: "12px"
        minLineHeight: "1.5×"
      aaa:
        minBody: "18px OR 14px bold"
        minCaption: "14px"
        minLineHeight: "1.6×"
    layers:
      global:
        - "--text-xs through --text-5xl"
        - "--leading-tight, --leading-normal, --leading-relaxed"
        - "--font-normal, --font-medium, --font-semibold, --font-bold"
      semantic:
        - "--text-label, --text-body, --text-title, --text-heading, --text-display"
        - "--text-h1, --text-h2, --text-h3, --text-h4"
        - "--text-button, --text-input, --text-caption"

  # -------------------------------------------------
  # 8.4 RADIUS TOKENS
  # -------------------------------------------------
  radius:
    required: true
    semantic: true
    rules:
      - id: RAD-001
        rule: "All radii must use tokens"
      - id: RAD-002
        rule: "No custom radii allowed"
      - id: RAD-003
        rule: "Safe mode sets radius to 0px"
    layers:
      global:
        - "--radius-xs: 0.25rem"
        - "--radius-sm: 0.375rem"
        - "--radius-md: 0.5rem"
        - "--radius-lg: 0.5rem"
        - "--radius-xl: 0.75rem"
        - "--radius-full: 9999px"
      semantic:
        - "--radius-input: var(--radius-md)"
        - "--radius-button: var(--radius-lg)"
        - "--radius-card: var(--radius-lg)"
        - "--radius-dialog: var(--radius-xl)"
        - "--radius-badge: var(--radius-full)"

  # -------------------------------------------------
  # 8.5 SHADOW TOKENS
  # -------------------------------------------------
  shadow:
    required: true
    semantic: false
    rules:
      - id: SHDW-001
        rule: "All shadows must use tokens"
      - id: SHDW-002
        rule: "Safe mode disables all shadows"
      - id: SHDW-003
        rule: "Shadows must meet contrast rules on different backgrounds"
    layers:
      global:
        - "--shadow-xs"
        - "--shadow-sm"
        - "--shadow-md"
        - "--shadow-lg"

  # -------------------------------------------------
  # 8.6 MOTION TOKENS
  # -------------------------------------------------
  motion:
    required: true
    semantic: false
    rules:
      - id: MOTION-001
        rule: "All animations must use motion tokens"
      - id: MOTION-002
        rule: "Must respect prefers-reduced-motion"
      - id: MOTION-003
        rule: "Essential animations only in Safe Mode"
      - id: MOTION-004
        rule: "Non-essential animations disabled in Safe Mode"
    layers:
      global:
        - "--motion-duration-fast: 150ms"
        - "--motion-duration-normal: 200ms"
        - "--motion-duration-slow: 300ms"
        - "--motion-ease-in, --motion-ease-out, --motion-ease-in-out"
        - "--motion-reduced: 0ms"

  # -------------------------------------------------
  # 8.7 OPACITY TOKENS
  # -------------------------------------------------
  opacity:
    required: true
    semantic: false
    rules:
      - id: OPACITY-001
        rule: "Opacity states must use tokens"
      - id: OPACITY-002
        rule: "No arbitrary opacity values"
    layers:
      global:
        - "--opacity-disabled: 0.45"
        - "--opacity-hover: 0.92"
        - "--opacity-active: 0.85"
        - "--opacity-selected: 0.95"
        - "--opacity-pressed: 0.8"
        - "--opacity-loading: 0.6"

  # -------------------------------------------------
  # 8.8 DENSITY TOKENS
  # -------------------------------------------------
  density:
    required: true
    semantic: false
    description: "Density tokens control spacing adjustments for different use cases"
    modes:
      compact: "-2px from base spacing, 0.75× multiplier"
      default: "0px offset, 1× multiplier"
      comfortable: "+2px from base spacing, 1.25× multiplier"
    rules:
      - id: DENSITY-001
        rule: "All components must support density modes"
      - id: DENSITY-002
        rule: "Density applies to spacing tokens"
      - id: DENSITY-003
        rule: "WCAG minimums must be maintained"

  # -------------------------------------------------
  # 8.9 Z-INDEX / LAYER TOKENS
  # -------------------------------------------------
  layering:
    required: true
    semantic: true
    description: "Z-index tokens provide semantic layering for overlays, modals, and floating elements"
    rules:
      - id: Z-001
        rule: "All z-index values must use layer tokens"
      - id: Z-002
        rule: "No raw z-index values allowed"
      - id: Z-003
        rule: "Prevents z-index conflicts"
    layers:
      base: 0
      floating: 10
      tooltip: 20
      popover: 30
      dropdown: 30
      dialog: 40
      modal: 40
      toast: 50
      overlay: 60
      maximum: 9999

  # -------------------------------------------------
  # 8.10 FOCUS RING TOKENS
  # -------------------------------------------------
  focusRing:
    required: true
    semantic: true
    description: "Focus ring tokens provide WCAG-compliant focus indicators"
    rules:
      - id: FOCUS-001
        rule: "All focus indicators must use focus ring tokens"
      - id: FOCUS-002
        rule: "Minimum focus ring width: 2px"
      - id: FOCUS-003
        rule: "Ring must maintain 3:1 contrast minimum (AA)"
      - id: FOCUS-004
        rule: "Ring must maintain 4.5:1 contrast minimum (AAA)"
      - id: FOCUS-005
        rule: "Focus ring must be visible on all interactive elements"
    layers:
      global:
        - "--focus-ring-color: var(--color-ring)"
        - "--focus-ring-color-aa: #000000 (21:1 on white)"
        - "--focus-ring-color-aaa: #1f2937 (7:1 on white)"
        - "--focus-ring-width: 2px"
        - "--focus-ring-offset: 2px"
        - "--focus-ring-radius: var(--radius-md)"

  # -------------------------------------------------
  # 8.11 COMPONENT STATE TOKENS
  # -------------------------------------------------
  state:
    required: true
    semantic: true
    description: "Component state tokens provide consistent state styling"
    states:
      - hover
      - active
      - selected
      - pressed
      - disabled
      - loading
    rules:
      - id: STATE-001
        rule: "States must not rely solely on color"
      - id: STATE-002
        rule: "Use opacity, border, or background changes"
      - id: STATE-003
        rule: "Disabled states must meet 3:1 contrast (AA) or 4.5:1 (AAA)"
    layers:
      global:
        - "--color-accent-hover"
        - "--color-accent-active"
        - "--color-accent-selected"
        - "--color-accent-disabled"
        - "--border-hover, --border-active, --border-disabled"
        - "--bg-hover, --bg-active, --bg-selected, --bg-disabled"

  # -------------------------------------------------
  # 8.12 GRID & LAYOUT TOKENS
  # -------------------------------------------------
  layout:
    required: true
    semantic: true
    description: "Grid and layout tokens provide consistent spacing and sizing for page layouts"
    rules:
      - id: LAYOUT-001
        rule: "All grid spacing must use tokens"
      - id: LAYOUT-002
        rule: "All layout dimensions must use tokens"
      - id: LAYOUT-003
        rule: "No arbitrary layout values"
    layers:
      global:
        - "--grid-gap: var(--space-6)"
        - "--grid-gap-sm: var(--space-4)"
        - "--grid-gap-lg: var(--space-8)"
        - "--layout-sidebar-width: 16rem"
        - "--layout-header-height: 3.5rem"
        - "--layout-content-padding: var(--space-6)"
        - "--layout-content-max-width: 1280px"
        - "--container-sm: 640px"
        - "--container-md: 768px"
        - "--container-lg: 1024px"
        - "--container-xl: 1280px"
        - "--container-2xl: 1536px"

# ---------------------------------------------------------------------
# 9. Theme System (Machine-Readable)
# ---------------------------------------------------------------------
themes:
  default:
    name: "Aesthetic Theme"
    description: "Professional, elegant, beautiful design"
    tenantOverride: true
    rules:
      - id: THEME-DEF-001
        rule: "Tenant customization allowed"
      - id: THEME-DEF-002
        rule: "Only accent tokens can be overridden"
      - id: THEME-DEF-003
        rule: "Base tokens remain immutable"

  wcagAA:
    name: "WCAG AA Theme"
    description: "Legal compliance (government, corporates, universities)"
    tenantOverride: false
    rules:
      - id: THEME-AA-001
        rule: "Fixed color pairs (validated AA)"
      - id: THEME-AA-002
        rule: "4.5:1 contrast minimum"
      - id: THEME-AA-003
        rule: "Tenant overrides FORBIDDEN"
      - id: THEME-AA-004
        rule: "System enforces WCAG AA compliance"

  wcagAAA:
    name: "WCAG AAA Theme"
    description: "Highest accessibility (hospitals, elderly care, high-risk users)"
    tenantOverride: false
    rules:
      - id: THEME-AAA-001
        rule: "Fixed color pairs (validated AAA)"
      - id: THEME-AAA-002
        rule: "7:1 contrast minimum"
      - id: THEME-AAA-003
        rule: "Tenant overrides FORBIDDEN"
      - id: THEME-AAA-004
        rule: "System enforces WCAG AAA compliance"

  highContrast:
    name: "High Contrast Theme"
    description: "Maximum contrast for visual impairments"
    tenantOverride: false
    rules:
      - id: THEME-HC-001
        rule: "Maximum contrast colors"
      - id: THEME-HC-002
        rule: "Tenant overrides FORBIDDEN"
      - id: THEME-HC-003
        rule: "Accessibility requirement"

  safeMode:
    name: "Safe Mode"
    description: "Cognitive comfort, reduced distractions"
    tenantOverride: false
    overrides:
      accent: "var(--color-gray-500)"
      accentHover: "var(--color-gray-600)"
      accentActive: "var(--color-gray-700)"
      shadows: "none"
      radius: "0px"
      motion: "0ms"
      fontWeight: "500"
      lineHeight: "1.625"
      captionSize: "14px"
    rules:
      - id: SAFE-001
        rule: "Safe mode overrides all other themes"
      - id: SAFE-002
        rule: "Disables tenant branding"
      - id: SAFE-003
        rule: "Enforces WCAG AAA minimums"
      - id: SAFE-004
        rule: "No shadows"
      - id: SAFE-005
        rule: "No animations (except essential)"
      - id: SAFE-006
        rule: "Increased line height (1.625 minimum)"
      - id: SAFE-007
        rule: "Increased font weight (500 minimum)"
      - id: SAFE-008
        rule: "Captions promoted to 14px (from 12px)"
    source: "globals.css [data-safe-mode='true']"

# ---------------------------------------------------------------------
# 10. RSC (React Server Components) Rules
# ---------------------------------------------------------------------
rsc:
  forbiddenApis:
    - window
    - document
    - navigator
    - localStorage
    - sessionStorage
    - location
    - history
  forbiddenHooks:
    - useEffect
    - useLayoutEffect
  rules:
    - id: RSC-001
      rule: "All styling in RSC must use CSS variables"
    - id: RSC-002
      rule: "No inline styles for colors"
    - id: RSC-003
      rule: "Tailwind tokens only in RSC"
    - id: RSC-004
      rule: "All dynamic themes must be injected client-side only"
    - id: RSC-005
      rule: "Token imports from tokens.ts forbidden in RSC (use CSS variables instead)"
    - id: RSC-006
      rule: "No browser APIs in RSC"

# ---------------------------------------------------------------------
# 11. AI Generation Guardrails
# ---------------------------------------------------------------------
aiGeneration:
  allowed:
    - semantic tokens
    - token-based tailwind classes
    - CSS variables via className
  forbidden:
    - hex colors
    - inline CSS colors
    - arbitrary spacing values
    - raw font sizes
    - raw z-index values
    - raw opacity values
  requiredChecks:
    - id: AI-CHECK-001
      check: "Contrast >= 4.5:1 (AA) or >= 7:1 (AAA)"
    - id: AI-CHECK-002
      check: "ARIA attributes present"
    - id: AI-CHECK-003
      check: "Keyboard navigation supported"
    - id: AI-CHECK-004
      check: "Token exists in globals.css"
    - id: AI-CHECK-005
      check: "Token follows naming conventions"

# ---------------------------------------------------------------------
# 12. Validation Rules (MCP-Executable)
# ---------------------------------------------------------------------
validation:
  mcpTools:
    - mcp_theme_validate_token
    - mcp_theme_check_contrast
    - mcp_tailwind_tokens_read_config
    - mcp_react_validate_token_usage
    - mcp_a11y_validate_contrast
    - mcp_figma_validate_token_sync
  requiredChecks:
    - id: VAL-001
      check: "Token must exist in globals.css"
    - id: VAL-002
      check: "Token follows naming prefix rules"
    - id: VAL-003
      check: "WCAG contrast validated"
    - id: VAL-004
      check: "Tenant override rules validated"
    - id: VAL-005
      check: "Safe mode override validation"
    - id: VAL-006
      check: "Density mode validation"
    - id: VAL-007
      check: "State tokens validated"
    - id: VAL-008
      check: "Cross-category conflict rules validated"

# ---------------------------------------------------------------------
# 13. Versioning Rules
# ---------------------------------------------------------------------
versioning:
  tokenVersion: "v2.1"
  required: true
  rules:
    - id: VERSION-001
      rule: "Base tokens require a major version bump to change"
    - id: VERSION-002
      rule: "Semantic tokens may change in minor versions"
    - id: VERSION-003
      rule: "Component tokens may update without version bump"
    - id: VERSION-004
      rule: "Tenant tokens may update without version bump (aesthetic theme only)"
