/* ======================================================================
   AI-BOS globals.css v3.3 — ENTERPRISE PRODUCTION EDITION
   WCAG AA/AAA • Safe Mode • Tenant Branding (Opt-In)
   Brand = Inherits Primary (Option C)
   Tailwind v4 @theme • Tokens v3.3 Synced • RSC + MCP Safe
   ====================================================================== */

@import 'tailwindcss';

/* ============================================================
   1. RAW THEME TOKENS (Tailwind v4 Native @theme)
   ============================================================ */

@theme {
  /* ---- System Surfaces ---- */
  --color-bg: #f9fafb;
  --color-bg-muted: #f3f4f6;
  --color-bg-elevated: #ffffff;

  /* ---- System Text ---- */
  --color-fg: #111827;
  --color-fg-muted: #6b7280;
  --color-fg-subtle: #9ca3af;

  /* ---- Functional Primary (System-Owned) ---- */
  --color-primary: #2563eb;
  --color-primary-soft: rgba(37, 99, 235, 0.12);
  --color-primary-foreground: #f9fafb;

  /* ---- System Secondary ---- */
  --color-secondary: #1d4ed8;
  --color-secondary-soft: rgba(29, 78, 216, 0.1);
  --color-secondary-foreground: #f9fafb;

  /* ---- Brand (DEFAULT inherits PRIMARY) ---- */
  --color-brand: var(--color-primary);
  --color-brand-soft: var(--color-primary-soft);
  --color-brand-foreground: var(--color-primary-foreground);

  /* ---- Status ---- */
  --color-success: #16a34a;
  --color-success-soft: rgba(22, 163, 74, 0.1);
  --color-success-foreground: #ffffff;

  --color-warning: #f59e0b;
  --color-warning-soft: rgba(245, 158, 11, 0.12);
  --color-warning-foreground: #111827;

  --color-danger: #dc2626;
  --color-danger-soft: rgba(220, 38, 38, 0.1);
  --color-danger-foreground: #ffffff;

  /* ---- Borders & Ring ---- */
  --color-border: #e5e7eb;
  --color-border-subtle: #f3f4f6;
  --color-ring: var(--color-primary);

  /* ---- Radii ---- */
  --radius-xxs: 0.125rem;
  --radius-xs: 0.25rem;
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  --radius-full: 9999px;

  /* ---- Shadows ---- */
  --shadow-xs: 0 1px 2px rgb(0 0 0 / 0.05);
  --shadow-sm: 0 1px 3px rgb(0 0 0 / 0.1);
  --shadow-md: 0 6px 16px rgb(15 23 42 / 0.08);
  --shadow-lg: 0 14px 32px rgb(15 23 42 / 0.16);

  /* ---- Spacing Scale (Tokenized for ERP Consistency) ---- */
  --spacing-2xs: 0.125rem;
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 0.75rem;
  --spacing-lg: 1rem;
  --spacing-xl: 1.5rem;
  --spacing-2xl: 2rem;
  --spacing-3xl: 3rem;
  --spacing-4xl: 4rem;
  --spacing-5xl: 5rem;
  --spacing-6xl: 6rem;

  /* ---- Letter Spacing ---- */
  --tracking-tight: -0.02em;
  --tracking-normal: 0;
  --tracking-wide: 0.025em;
  --tracking-wider: 0.05em;
}

/* ============================================================
   2. ROOT BINDINGS — WCAG, Typography, Functional Tokens
   ============================================================ */

:root {
  /* ---- Font Family ---- */
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

  /* ---- Fluid Typography ---- */
  --font-xs: clamp(12px, 0.75vw, 13px);
  --font-sm: clamp(14px, 0.9vw, 15px);
  --font-base: clamp(16px, 1.1vw, 17px);
  --font-lg: clamp(18px, 1.2vw, 20px);

  --font-h1: clamp(32px, 3vw, 40px);
  --font-h2: clamp(28px, 2.5vw, 32px);
  --font-h3: clamp(24px, 2vw, 28px);
  --font-h4: clamp(20px, 1.8vw, 24px);
  --font-h5: clamp(18px, 1.4vw, 20px);
  --font-h6: clamp(16px, 1.2vw, 18px);

  --font-display-sm: clamp(36px, 3.5vw, 48px);
  --font-display-md: clamp(48px, 5vw, 64px);
  --font-display-lg: clamp(64px, 7vw, 80px);

  --safe-mode-font-multiplier: 1;

  /* ---- Line Heights ---- */
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;

  /* ---- WCAG Contrast Metadata ---- */
  --contrast-aa-normal-text: 4.5;
  --contrast-aa-large-text: 3.0;
  --contrast-aaa-normal-text: 7.0;
  --contrast-aaa-large-text: 4.5;

  /* ---- Surfaces ---- */
  --surface-bg: var(--color-bg);
  --surface-bg-muted: var(--color-bg-muted);
  --surface-bg-elevated: var(--color-bg-elevated);

  /* ---- Text ---- */
  --text-fg: var(--color-fg);
  --text-fg-muted: var(--color-fg-muted);
  --text-fg-subtle: var(--color-fg-subtle);

  /* ---- Functional Primary ---- */
  --primary-bg: var(--color-primary);
  --primary-soft: var(--color-primary-soft);
  --primary-foreground: var(--color-primary-foreground);

  /* ---- Brand = Inherits Primary (Option C) ---- */
  --brand-bg: var(--color-brand);
  --brand-soft: var(--color-brand-soft);
  --brand-foreground: var(--color-brand-foreground);

  /* ---- Borders & Ring ---- */
  --border-color: var(--color-border);
  --border-subtle: var(--color-border-subtle);
  --ring-color: var(--color-ring);

  /* ============================================================
     THEME TOKENS (Component-Facing Layer)
     Components MUST use these for WCAG/Tenant override safety
     ============================================================ */

  /* Theme Surfaces */
  --theme-bg: var(--surface-bg);
  --theme-bg-muted: var(--surface-bg-muted);
  --theme-bg-elevated: var(--surface-bg-elevated);

  /* Theme Text */
  --theme-fg: var(--text-fg);
  --theme-fg-muted: var(--text-fg-muted);
  --theme-fg-subtle: var(--text-fg-subtle);

  /* Theme Primary */
  --theme-primary: var(--primary-bg);
  --theme-primary-soft: var(--primary-soft);
  --theme-primary-foreground: var(--primary-foreground);

  /* Theme Secondary */
  --theme-secondary: var(--color-secondary);
  --theme-secondary-soft: var(--color-secondary-soft);
  --theme-secondary-foreground: var(--color-secondary-foreground);

  /* Theme Brand */
  --theme-brand: var(--brand-bg);
  --theme-brand-soft: var(--brand-soft);
  --theme-brand-foreground: var(--brand-foreground);

  /* Theme Status */
  --theme-success: var(--color-success);
  --theme-success-soft: var(--color-success-soft);
  --theme-success-foreground: var(--color-success-foreground);

  --theme-warning: var(--color-warning);
  --theme-warning-soft: var(--color-warning-soft);
  --theme-warning-foreground: var(--color-warning-foreground);

  --theme-danger: var(--color-danger);
  --theme-danger-soft: var(--color-danger-soft);
  --theme-danger-foreground: var(--color-danger-foreground);

  /* Theme Border & Ring */
  --theme-border: var(--border-color);
  --theme-border-subtle: var(--border-subtle);
  --theme-ring: var(--ring-color);

  /* Theme Shadows */
  --theme-shadow-xs: var(--shadow-xs);
  --theme-shadow-sm: var(--shadow-sm);
  --theme-shadow-md: var(--shadow-md);
  --theme-shadow-lg: var(--shadow-lg);

  /* Theme Typography */
  --theme-font-xs: var(--font-xs);
  --theme-font-sm: var(--font-sm);
  --theme-font-base: var(--font-base);
  --theme-font-lg: var(--font-lg);
  --theme-font-h1: var(--font-h1);
  --theme-font-h2: var(--font-h2);
  --theme-font-h3: var(--font-h3);
  --theme-font-h4: var(--font-h4);
  --theme-font-h5: var(--font-h5);
  --theme-font-h6: var(--font-h6);
  --theme-font-display-sm: var(--font-display-sm);
  --theme-font-display-md: var(--font-display-md);
  --theme-font-display-lg: var(--font-display-lg);
  --theme-line-height-normal: var(--line-height-normal);
  --theme-line-height-relaxed: var(--line-height-relaxed);
  --theme-font-sans: var(--font-sans);

  /* Theme Spacing */
  --theme-spacing-2xs: var(--spacing-2xs);
  --theme-spacing-xs: var(--spacing-xs);
  --theme-spacing-sm: var(--spacing-sm);
  --theme-spacing-md: var(--spacing-md);
  --theme-spacing-lg: var(--spacing-lg);
  --theme-spacing-xl: var(--spacing-xl);
  --theme-spacing-2xl: var(--spacing-2xl);
  --theme-spacing-3xl: var(--spacing-3xl);
  --theme-spacing-4xl: var(--spacing-4xl);
  --theme-spacing-5xl: var(--spacing-5xl);
  --theme-spacing-6xl: var(--spacing-6xl);

  /* Theme Letter Spacing */
  --theme-tracking-tight: var(--tracking-tight);
  --theme-tracking-normal: var(--tracking-normal);
  --theme-tracking-wide: var(--tracking-wide);
  --theme-tracking-wider: var(--tracking-wider);

  /* Theme Radius */
  --theme-radius-xxs: var(--radius-xxs);
  --theme-radius-xs: var(--radius-xs);
  --theme-radius-sm: var(--radius-sm);
  --theme-radius-md: var(--radius-md);
  --theme-radius-lg: var(--radius-lg);
  --theme-radius-xl: var(--radius-xl);
  --theme-radius-2xl: var(--radius-2xl);
  --theme-radius-full: var(--radius-full);
}

/* ============================================================
   3. DARK MODE (WCAG AA/AAA Safe)
   ============================================================ */

.dark,
:root[data-mode='dark'] {
  color-scheme: dark;

  --surface-bg: #0a0a0b;
  --surface-bg-muted: #18181b;
  --surface-bg-elevated: #27272a;

  --text-fg: #fafafa;
  --text-fg-muted: #a1a1aa;
  --text-fg-subtle: #71717a;

  --primary-bg: #60a5fa;
  --primary-soft: rgba(96, 165, 250, 0.15);
  --primary-foreground: #030712;

  --brand-bg: var(--primary-bg);
  --brand-soft: var(--primary-soft);
  --brand-foreground: var(--primary-foreground);

  --border-color: #3f3f46;
  --border-subtle: #27272a;
  --ring-color: #60a5fa;

  --shadow-xs: 0 1px 2px rgb(0 0 0 / 0.8);
  --shadow-sm: 0 2px 4px rgb(0 0 0 / 0.9);
  --shadow-md: 0 8px 16px rgb(0 0 0 / 0.95);
  --shadow-lg: 0 16px 32px rgb(0 0 0 / 1);
}

/* ============================================================
   4. TENANT BRANDING (Opt-In)
   ============================================================ */

:root[data-tenant='dlbb'] {
  --brand-bg: #22c55e;
  --brand-soft: rgba(34, 197, 94, 0.12);
  --brand-foreground: #f0fdf4;
}

:root[data-tenant='enterprise'] {
  --brand-bg: #8b5cf6;
  --brand-soft: rgba(139, 92, 246, 0.12);
  --brand-foreground: #faf5ff;
}

:root[data-tenant]:not([data-tenant='dlbb']):not([data-tenant='enterprise']) {
  --brand-bg: var(--primary-bg);
  --brand-soft: var(--primary-soft);
  --brand-foreground: var(--primary-foreground);
}

/* ============================================================
   5. SAFE MODE (Enterprise Accessibility Lock)
   ============================================================ */

:root[data-safe-mode='true'],
:root.safe-mode {
  --primary-bg: var(--text-fg);
  --primary-soft: var(--border-subtle);
  --primary-foreground: var(--surface-bg);

  --brand-bg: var(--text-fg);
  --brand-soft: var(--border-subtle);
  --brand-foreground: var(--surface-bg);

  --shadow-xs: none;
  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;

  --safe-mode-font-multiplier: 1.125;

  --font-xs: clamp(14px, 0.9vw, 15px);
  --font-sm: clamp(16px, 1.1vw, 17px);
  --font-base: clamp(18px, 1.3vw, 20px);
  --font-lg: clamp(20px, 1.5vw, 22px);
}

/* ============================================================
   6. AAA MODE (Auditor Mode)
   ============================================================ */

:root[data-accessibility='aaa'] {
  --font-xs: clamp(14px, 1vw, 16px);
  --font-sm: clamp(16px, 1.3vw, 18px);
  --font-base: clamp(18px, 1.6vw, 20px);
  --font-lg: clamp(20px, 1.8vw, 24px);

  --line-height-normal: 1.625;
  --line-height-relaxed: 1.75;
}

/* ============================================================
   7. DARK + SAFE
   ============================================================ */

:root[data-mode='dark'][data-safe-mode='true'] {
  --text-fg: #ffffff;
  --text-fg-muted: #d4d4d8;

  --border-color: #52525b;

  --shadow-xs: none;
  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;
}

/* ============================================================
   8. DARK + AAA
   ============================================================ */

:root[data-mode='dark'][data-accessibility='aaa'] {
  --text-fg: #ffffff;
  --text-fg-muted: #e4e4e7;
  --text-fg-subtle: #a1a1aa;

  /* AAA Status Colors */
  --color-success: #86efac;
  --color-warning: #fcd34d;
  --color-danger: #fca5a5;

  --border-color: #71717a;

  /* AAA Soft Surfaces */
  --surface-bg-muted: #1a1a1d;
  --surface-bg-elevated: #2a2a2e;
}

/* ============================================================
   9. GLOBAL DOCUMENT BASE
   ============================================================ */

body {
  font-family: var(--font-sans);
  background-color: var(--surface-bg);
  color: var(--text-fg);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

::selection {
  background-color: color-mix(in srgb, var(--primary-bg) 15%, transparent);
  color: var(--text-fg);
}

:focus-visible {
  outline: 2px solid var(--ring-color);
  outline-offset: 3px;
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  * {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}

/* ============================================================
   10. MCP MARKERS — RSC Boundaries + Violations
   ============================================================ */

[data-rsc-boundary='server'] { outline: 2px dotted var(--color-success); }
[data-rsc-boundary='client'] { outline: 2px dotted var(--color-warning); }
[data-rsc-boundary='shared'] { outline: 2px dotted var(--text-fg-muted); }

/* ============================================================
   11. COMPONENT FOUNDATIONS (Button, Card, Input)
   ============================================================ */

.theme-card {
  background-color: var(--surface-bg-elevated);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xs);
  padding: var(--spacing-lg);
}

.theme-button-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
  background-color: var(--primary-bg);
  color: var(--primary-foreground);
  padding-inline: var(--spacing-md);
  padding-block: var(--spacing-xs);
  border-radius: var(--radius-lg);
  font-size: var(--font-sm);
  font-weight: 500;
  transition: transform 120ms ease, opacity 120ms ease;
  box-shadow: var(--shadow-xs);
}

.theme-button-primary:hover { opacity: .95; }
.theme-button-primary:active { transform: translateY(1px) scale(.99); }

.theme-input {
  background-color: var(--surface-bg-elevated);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  color: var(--text-fg);
  font-size: var(--font-base);
  transition: border-color 120ms ease, box-shadow 120ms ease;
}

.theme-input:focus-visible {
  border-color: var(--ring-color);
  box-shadow: 0 0 0 2px var(--ring-color);
}
