# MCP UI Generator Server

This directory contains the MCP (Model Context Protocol) server implementation for the AI-BOS UI component generator.

## Overview

The UI generator uses a system prompt (defined in `tools/MCP_SYSTEM_PROMPT.md`) to enforce design system rules when generating React components. The prompt is automatically synced to a TypeScript file for use by the MCP server.

## Files

- **`server.ts`** - MCP server implementation (template/example)
  - Imports the generated system prompt
  - Provides `runUiGeneratorAgent()` function for LLM interactions
  - Currently uses optional dependencies (`@ai-sdk/openai`, `ai`) - install these if you plan to use this server

- **`systemPrompt.generated.ts`** - Auto-generated from `tools/MCP_SYSTEM_PROMPT.md`
  - **DO NOT EDIT** - This file is automatically generated
  - Regenerate by running: `pnpm sync-mcp-prompt`

## Workflow

1. **Edit the system prompt**: Update `tools/MCP_SYSTEM_PROMPT.md` with your design system rules
2. **Sync the prompt**: Run `pnpm sync-mcp-prompt` to regenerate `systemPrompt.generated.ts`
3. **Use in MCP server**: Import `UI_GENERATOR_SYSTEM_PROMPT` from the generated file

## TypeScript Configuration

The `.mcp` directory is excluded from TypeScript checking in `tsconfig.json` because:
- It's infrastructure/template code, not core app code
- Optional dependencies may not be installed
- Keeps the main TypeScript pipeline clean

If you want full type checking on the MCP server:
- Install the required dependencies (`@ai-sdk/openai`, `ai`)
- Remove `@ts-ignore` comments
- Optionally move to `src/mcp` and include in `tsconfig.json`

## CI Integration

The GitHub Actions workflow (`.github/workflows/ui-constitution.yml`) automatically:
- Syncs the prompt on every PR
- Verifies the generated file is in sync
- Validates UI constitution rules

If the generated file is out of sync, the CI will fail with instructions to run `pnpm sync-mcp-prompt`.

